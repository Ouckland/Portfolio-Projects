
{% extends 'partials/base.html' %}
{% block content %}
<div style="max-width: 700px; margin: auto; padding: 1rem;">
    <h3 style="margin-bottom: 1rem;">Chat with {{ receiver.get_full_name|default:receiver.username }}</h3>

    <div style="border: 1px solid #ccc; border-radius: 8px; padding: 1rem; height: 400px; overflow-y: auto; background: #f9f9f9;">
        {% for message in messages %}
            <div style="text-align: {% if message.sender == request.user %}right{% else %}left{% endif %}; margin-bottom: 1rem;">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: {% if message.sender == request.user %}#007bff{% else %}#eee{% endif %}; color: {% if message.sender == request.user %}#fff{% else %}#000{% endif %}; border-radius: 15px;">
                    {{ message.body }}<br>
                    <small>{{ message.timestamp|date:"M d, H:i" }}</small>
                </div>
            </div>
        {% empty %}
            <p>No messages yet.</p>
        {% endfor %}
    </div>

    <form method="post" style="margin-top: 1rem;">
        {% csrf_token %}
        {{ form.body }}
        <button type="submit" style="margin-top: 0.5rem; padding: 0.5rem 1rem;">Send</button>
    </form>
</div>
{% endblock %}

